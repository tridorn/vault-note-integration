# Metadata Architecture (Condensed)

## Principles

* **Separation of concerns:** identity, lifecycle, classification, relations are distinct.
* **One field, one role:** no synonyms, no duplicates.
* **Stable core:** never rename core; optional modules can be added/removed wholesale.
* **Automation first:** derived values (`updated`, `auto.keywords`, counts) handled by scripts.
* **Human economy:** manual touch limited to `title`, `summary`, `topics`, occasionally `status`.
* **UID as key:** immutable, timestamp-based; filenames may equal UID.
* **Namespacing:** optional modules grouped (`relations:`, `metrics:`).
* **Forward-compatible:** unknown blocks ignored.
* **Plain YAML:** no plugin-specific syntax.

## Layered Schema

* **Core Identity:** UID, title, owner, created/updated.
* **Lifecycle:** stage, status, project, review date.
* **Classification:** topics (controlled vocab, ≥1), tags (free form, avoid duplication).
* **Description:** human summary.
* **Optional modules:**

  * `relations:` (broader, derived\_from, related, prev).
  * `auto:` (keywords, embedding ref, word count).
  * `governance:` (quality, retention, last\_reviewed).
  * `metrics:` (opens, backlinks).
  * `access:` (visibility, sensitive).
  * domain-specific blocks (`research:`, `code:`).

## Canonical Layout (Order)

Core → Lifecycle → Classification → Description → Relations → Auto → Governance → Metrics → Access → Domain modules.

## Automation Hooks

* On creation: inject UID, created, stage.
* On save: update `updated`, recompute `auto.word_count`.
* Nightly: refresh keywords, backlinks, opens, embeddings.
* Weekly: list due reviews.
* Folder moves: correct stage.
* Annual: archive with retention flag.

## Governance

* Start lean: Month 1 only Core + Lifecycle + Classification + Summary.
* Add `auto:` if Library > 60 notes.
* Relations only if ontology friction emerges.
* Quarterly prune tags and review topics.
* Annual evaluation of governance/metrics—drop if unused.

**Rule:** introduce fields only with a concrete downstream use.

## Migration Steps

1. Snapshot vault.
2. Define authoritative `topics.csv`.
3. Write minimal creation template.
4. Script: fill UIDs, created/updated from Git.
5. Map old keys → new; drop deprecated.
6. Validate ordering/enums on commit.
7. Later: nightly automation for auto/metrics.
8. Optional: relations when justified.

## Minimal Starter (Month 1)

```yaml
uid: 20250720115742
title: Deep Work Retrospective
owner: hk
created: 2025-07-20T09:57:42+02:00
updated: 2025-07-20T09:57:42+02:00

stage: learn
status: draft
project: P2025-003 Deep_Work_Book

topics:
  - Productivity
tags:
  - #retrospective

summary: >
  Post-project reflection on applying deep work scheduling; initial notes.
```

## Field Retention Heuristic

* Does it change action? If not, drop.
* Can it be derived? If yes, auto.
* Is it redundant? Keep only abstract/stable version.
* Does it change at same cadence as neighbors? If not, isolate in separate block.
