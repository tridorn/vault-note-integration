---
owner: Ben Jendyk
id: 55eeafcf-3a21-40eb-9486-7d3a63002f41
created: 2025-04-25T20:00:52+0200
modified: 2025-05-16T18:43:26+0200
tags: [access/public, language/en, pr/25/084, tf/quarter]
key-words: []
---

### Zero-to-MVP Execution Path  
**Objective:** stand up a production-credible slice that proves an *Opportunity-centric* backbone, handles one canonical use-case—**a single green loan with subsidy option**—and is extensible without schema surgery.

---

## Phase 1 Domain Kernel (Week 1-2)

| Deliverable | Action | Rationale |
|-------------|--------|-----------|
| **Facet v1 Pack** | Freeze **F-00 CoreHeader, F-01 Identity, F-02 Consent, F-03 Financial, F-16 Vendor, F-17 Verification, F-23 CreditDecision, F-07 Disbursement**.  Draft JSON Schema + micro-state charts and commit. | Anything not in this pack is out-of-scope for the MVP; limits blast-radius. |
| **Capability Matrix v1** | Bind only *SME, Vendor, Verifier, Bank, Platform* to the above facets. | Simplicity; regulator enters later via IncentiveFacet. |
| **O-Code Strip (0-10)** | Compile the minimal ledger that drives lifecycle: O0-O10 already outlined. | Guarantees deterministic story from creation to disbursement. |

*Outcome:* Ontology + authority + event vocabulary frozen; downstream code cannot thrash.

---

## Phase 2 Infrastructure Spine (Week 2-4)

| Component | Minimum Specification |
|-----------|-----------------------|
| **Event Store** | Single-broker Kafka ≥ 3.6, topic `opportunity-events-{env}` (compaction + retention 365 d). |
| **Aggregate Repository** | Service in chosen language (e.g. Kotlin + Spring, Node + NestJS) — consumes events, materialises JSONB snapshot per `opportunityId` in PostgreSQL. |
| **Command API** | REST is enough (GraphQL later). End-points: `POST /opportunity`, `POST /facet/{name}`, `POST /facet/{name}/state`. Simple JWT auth. |
| **Query API** | `GET /opportunity/{id}` returns aggregate snapshot. Nothing else. |
| **Merkle Integrity Service** | Library that re-hashes facet blobs on mutation, stores root hash in CoreHeader. |

---

## Phase 3 Vertical Feature Slice (Week 4-6)

**User journey (happy path)**  
1. **SME** `POST /opportunity` → CoreHeader/Identity/Consent facets auto-attached.  
2. **SME** `POST /facet/financial` → FinancialFacet Draft.  
3. **Vendor** `POST /facet/vendor` → VendorFacet Committed.  
4. **Platform** schedules verification → creates VerificationFacet Planned.  
5. **Verifier** `POST /facet/verification/state?to=Verified`.  
6. **Platform** `POST /facet/credit-decision` (Draft) → `state=Approved` by Bank.  
7. **Bank** `POST /facet/disbursement/state?to=Executed`.  
8. Aggregate macro-state flips to **Active** automatically.

*Acceptance tests:* reproducible replay of events O1→O10; aggregate snapshot matches expected JSON; Merkle root unchanged on fetch.

---

## Phase 4 Governance & Observability (Week 6-7)

| Item | Minimal Yet Sufficient |
|------|------------------------|
| **Audit Dashboard** | Grafana panel over PostgreSQL view: Opportunity state, facet states, last event time. |
| **SLA Cron** | Daily job scans for VerificationFacet Planned > 4 d → emits `O4_timeout` → escalates. |
| **Schema Registry** | Confluent Schema Registry or open-source alternative—store JSON Schemas, version-lock producers. |

---

## Phase 5 Thin UI & Pilot (Week 8-9)

1. **Back-office React SPA** with three screens: *Opportunity List*, *Detail (facets & states)*, *Action modal*.  
2. Pilot with **one SME, one Vendor, sandbox Bank**.  
3. Capture friction notes; most will be capability omissions or facet field gaps—schema-compatible tweaks, not architectural rewrites.

---

## Guiding Axioms During MVP

| Axiom | Operational Rule |
|-------|------------------|
| **Ontology Precedes Code** | Never let a developer create a table or API field that isn’t in the facet schema repo. |
| **Event Immutability** | Under no circumstance allow an “update” to an event; fix through compensating event. |
| **One Aggregate, One Topic** | Resist calls for micro-topics per facet; filtering by payload is sufficient. |
| **State ≠ Boolean** | Every lifecycle must use the state names in its chart; no ad-hoc flags. |
| **De-Risk Through Emulation** | Until payments go live, mock DisbursementFacet events; everything else real. |

---

### Start-Point Checklist (Day-1)

1. **Create Git repo** with folders `/schemas`, `/statecharts`, `/services`, `/infrastructure`.  
2. **Write CoreHeader schema**; commit signed tag `v0.1`.  
3. **Spin Docker Compose**: Kafka, Postgres, Schema Registry. Push `.env.sample`.  
4. **Stub Command API** with one route `POST /opportunity` that emits event `O1`.  
5. **Set CI** to fail on diff where schema files are absent or not JSON-valid.

Achieve those five steps on day one, and the *Opportunity-first* skeleton is alive. Everything afterwards is incremental facet accretion and state-machine enforcement—not architectural surgery.