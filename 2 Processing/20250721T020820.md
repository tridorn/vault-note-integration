---
owner: Ben Jendyk
id: 3ce9a135-69cf-43be-879a-5b963130d3d5
created: 2025-07-21T02:08:20+0200
modified: 2025-07-21T18:24:21+0200
tags: [access/public, language/en]
key-words: []
---

Below is a **"one‑brain, two‐hands" rule‑set** for your dual‑layer notes.  
It defines **what belongs in YAML (the _source of truth_) vs. what belongs in the mirrored body section (the _human exposition_)**, and how to keep them reliably in sync **without writing the same thing twice**.

* * *

## 1 Single Source‑of‑Truth Policy

| Layer | Role | Who edits | Machine duties | 
| ---- | ---- | ---- | ----  |
| **YAML** | _Authoritative facts_ -- small, structured, machine‑readable values | Mostly automation & forms; you touch only a few fields | Validation, graph building, queries | 
| **Body** | _Narrative & reasoning_ -- prose, tables, examples, decisions | You write freely | Pull lightweight displays from YAML (Dataview/Templater), never push facts back | 

> **Rule #1:** **YAML → Body** is the only automatic direction.  
Edits you make in body _never_ change YAML; instead, you adjust YAML directly (via a block template or metadata view) and let automation **re‑render** the body section.
* * *

## 2 Practical Division of Labor

| Block | YAML holds | Body section holds | 
| ---- | ---- | ----  |
| `core` | `uid`, `owner`, timestamps, _current_title | 1‑line badge showing those fields (pulled via Dataview); plus optional _story_of the note's origin | 
| `flow` | Current stage/status/project IDs | **Tiny table auto‑rendered** from YAML + any _rationale_ for status change | 
| `taxonomy` | Canonical `topics`, `tags`, `facets`, `type` | Brief commentary: "Why I filed this under X, not Y" | 
| `links` | Arrays of UIDs (`broader`, `related`, …) | Wikilinks **generated** from those UIDs + narrative of how they relate | 
| `content` | Machine summary, keywords, lang, words | The **actual substance** of the concept, method, note, etc. (what you'd write anyway) | 
| `source` | Bibliographic IDs, URLs, capture mode | Citation table + optional extraction notes | 
| `govern` | Sensitivity, license, retention, review date | Short compliance note (e.g., "safe to publish after …") | 
| `metrics` | Last‑opened, backlink counts | Optional interpretation: "High backlinks → foundational" | 
| `ops` | Export, embedding, lock flags | Usually nothing (you rarely comment on pipeline flags) | 

_Short version:_ **YAML stores _values_. Body stores _meaning_.**

* * *

## 3 How to Avoid Manual Duplication

### 3.1 Use Dataview inline pulls
    
    
    ## 2 Flow
    ```dataview
    TABLE stage, status, project, due
    FROM ""
    WHERE file.path = this.file.path
    FLATTEN flow.stage as stage
    FLATTEN flow.status as status
    FLATTEN flow.project as project
    FLATTEN flow.due as due
    ```

_Promotion note:_ Ready for library after user tests.
    
    
 Dataview reads the YAML; the table refreshes automatically.  
**You don't re‑type anything.**  
*(For static export, run a script that materialises the table to markdown.)*

### 3.2  Hybrid template re‑renders the display block

Your "Add Flow" Templater template:

1. Updates YAML (`flow.stage`, etc.)  
2. Regenerates (or inserts if missing) the Dataview snippet above.  
   - If already present, it **does not** overwrite your narrative paragraph below it.

---

## 4 Field‑by‑Field Source Rules

| Field | Edit path | Automation |
|-------|-----------|------------|
| `core.title` | **Edit H1** → post‑save hook copies into YAML | Title always driven by body (most ergonomic) |
| `core.uid` / timestamps | Never edit | Generated once; never shown verbatim unless you need it |
| `flow.stage` | Folder move **or** "Update Flow" template | Hook updates YAML; template re‑renders table |
| `taxonomy.tags/topics` | QuickAdd form → YAML | Body Dataview bullet list refreshes |
| `links.*` | Breadcrumbs / Link manager → YAML | Dataview query converts UIDs to wikilinks in body |
| `content.summary` | First paragraph of `## 5 Content` → script mirrors into YAML | Only if you want auto‑sync; or keep manual |
| `metrics.*` | Script only | Body table refreshes nightly |
| `ops.lock` | Manual toggle in YAML | Template shows 🔒 badge in Core section |

---

## 5 Sync Mechanism Cheat‑Sheet

| Tool | Direction | What it does |
|------|-----------|-------------|
| **Pre‑save hook** | Body → YAML (title only) | Mirrors H1 into `core.title`; updates timestamps & word count |
| **On folder move** | FS → YAML | Sets `flow.stage` based on parent folder prefix |
| **Block template (Flow, Taxonomy, Links, …)** | User → YAML → Body | Edits YAML then re‑injects/upserts Dataview snippet |
| **Nightly cron** | Graph → YAML | Refreshes `metrics.backlinks`; updates body table via Dataview auto‑refresh |
| **Dataview** | YAML → Body (read‑only) | Renders all structured snippets live |

No reverse write of machine scripts from body to YAML **except title and (optional) summary**. That single reversible path is intentional because those two are easiest for humans to author in natural text.

---

## 6 What Happens When Something Changes?

- **You rename a project?**  
  *Do:* run "Update Flow" template → YAML `project` field changes → body table refreshes.

- **You discover a new parent concept?**  
  *Do:* run "Add Link" template → `links.broader += <uid>` → body Links list instantly shows new wikilink.

- **You decide the note is confidential?**  
  *Do:* flip `govern.sensitivity: confidential` in YAML → Core section badge script inserts a "🔒 confidential" callout.

Nothing else to remember.

---

## 7 Why YAML is the Canonical Truth

1. **Structured → lossless** for any downstream process (JSON export, SQL, API).
2. **Body prose changes** shouldn't break graph or pipelines.
3. **Sync conflicts** easier to resolve: values in one small header diff, not scattered tables.

---

## 8 If You Ever Need Body‑First Authority

Pick **exactly one field** (e.g., `content.summary`) and document:

> "First paragraph of `## 5 Content` overwrites `content.summary` on save;  
> editing `content.summary` directly will be lost."

Everything else keeps the YAML‑primary rule.

---

## 9 Template Starter Pack (Naming Suggestion)

| Template file | Command name | Inserts |
|---------------|--------------|---------|
| `_new-core.md` | "New note" | Full core YAML + `## 1 Core` + minimal body |
| `blocks/flow.md` | "Add/Update Flow block" | Updates YAML.flow, injects/refreshes Flow table snippet |
| `blocks/taxonomy.md` | "Add Taxonomy block" | Same pattern |
| `blocks/links.md` | "Add Links block" | Same pattern |
| … | … | … |

Create a **"Promote to Library" macro template** that calls:  
`flow` → `taxonomy` → `links` → `content` in sequence.

---

### TL;DR

* Keep **YAML as the only authoritative data store**.  
* Use **Dataview or scripted snippets** in body sections so you **display**, not duplicate, that data.  
* Hybrid templates update YAML first, then (re‑)render the corresponding body snippet.  
* Title (and optionally summary) may flow *from* body → YAML; everything else flows YAML → body.  
Follow this and you'll never chase two diverging copies again.